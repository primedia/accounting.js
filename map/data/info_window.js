// Generated by CoffeeScript 1.6.3
(function() {
  'use strict';
  define(['flight/lib/component', 'underscore', 'common/templates', 'common/ag-utils'], function(defineComponent, _, templates, utils) {
    var infoWindowData;
    infoWindowData = function() {
      this.defaultAttrs({
        pinRoute: "/map/pin/"
      });
      this.getData = function(ev, data) {
        var _this = this;
        return this.xhr = $.ajax({
          url: "" + this.pinRoute + data.listingId,
          success: function(ajaxData) {
            return $(document).trigger("infoWindowDataAvailable", ajaxData);
          },
          complete: function() {
            return utils.hideSpinner();
          }
        });
      };
      return this.after('initialize', function() {
        return this.on(document, 'uiInfoWindowDataRequest', this.getData);
      });
    };
    return defineComponent(infoWindowData);
  });

}).call(this);
